!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.LocalStorageCache=t()}(this,function(){var e={add:function(e,t,o){if("object"==typeof vallue&&(t=JSON.stringify(t)),0==o){var a=this;window.onbeforeunload=function(){a.remove(e)}}else if("number"==typeof o){{+new Date}o+=1e3*o}else"object"==typeof o&&(o=o.getTime()||-1);var r={data:t,expired:o,time:+new Date};localStorage.setItem(e,JSON.stringify(r))},get:function(e,t){var o=JSON.parse(localStorage.getItem(e)),a=$.Deferred();if(o.expired>0){var r=+new Date;r>o.expired?t?t().fail(function(){a.resolve(o.data)}):a.resolve(null):a.resolve(o.data)}else a.resolve(o.data);return a},remove:function(e){localStorage.removeItem(e)},clear:function(){localStorage.clear()}};return e});